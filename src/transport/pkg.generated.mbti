// Generated using `moon info`, DON'T EDIT IT
package "ZSeanYves/MoonbitHTTP/transport"

import(
  "ZSeanYves/bufferutils"
)

// Values
pub fn buf_new() -> BufCursor

pub fn default_limits() -> IoLimits

pub fn from_inmemory(Array[Byte]) -> Transport raise @bufferutils.BufferError

pub fn io_is_fatal(IoError) -> Bool

// Errors
pub suberror BufError {
  NeedMore(String)
  LineTooLong(String)
}

pub suberror IoError {
  Eof
  Closed
  WouldBlock
}

// Types and methods
pub struct BufCursor {
  mut buf : Array[Byte]
}
pub fn BufCursor::buf_drain(Self, Int) -> Int
pub fn BufCursor::buf_is_empty(Self) -> Bool
pub fn BufCursor::buf_len(Self) -> Int
pub fn BufCursor::buf_peek(Self, Int) -> Array[Byte]
pub fn BufCursor::buf_push(Self, Array[Byte]) -> Unit
pub fn BufCursor::buf_read_line_crlf(Self, Int) -> Result[Array[Byte], BufError]
pub fn BufCursor::buf_take(Self, Int) -> Array[Byte]

pub struct IoLimits {
  read_window_max : Int
  write_buffer_max : Int
  read_timeout_ms : Int
  write_timeout_ms : Int
}

pub struct Transport {
  mut rx : Array[Byte]
  mut tx : Array[Byte]
  txw : @bufferutils.BufferWriter
  mut is_closed : Bool
}
pub fn Transport::close(Self) -> Result[Unit, IoError]
pub fn Transport::flush(Self) -> Result[Unit, IoError]
pub fn Transport::push_rx(Self, Array[Byte]) -> Unit
pub fn Transport::read(Self, Array[Byte]) -> Result[Int, IoError]
pub fn Transport::read_exact(Self, Int) -> Result[Array[Byte], IoError]
pub fn Transport::rx_len(Self) -> Int
pub fn Transport::take_tx(Self) -> Array[Byte]
pub fn Transport::write(Self, Array[Byte]) -> Result[Int, IoError] raise @bufferutils.BufferError
pub fn Transport::write_all(Self, Array[Byte]) -> Result[Unit, IoError] raise @bufferutils.BufferError

// Type aliases

// Traits

